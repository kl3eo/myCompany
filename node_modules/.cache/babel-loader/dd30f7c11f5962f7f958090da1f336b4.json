{"ast":null,"code":"import _classCallCheck from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alex/react_projects/myCompany/src/components/admin/list/employeesListComponent.js\";\nimport React, { Component } from 'react';\nimport HeaderComponent from '../../commons/headerComponent';\nimport { connect } from 'react-redux';\nimport { employeesListAction, searchEmployeeAction } from '../../../actions/adminActions';\nimport EmployeesListView from './employeesListView'; //import { getCookie } from '../../../utils/cookies';\n\nvar user = null;\n\nvar EmployeesListComponent = /*#__PURE__*/function (_Component) {\n  _inherits(EmployeesListComponent, _Component);\n\n  function EmployeesListComponent(props) {\n    var _this;\n\n    _classCallCheck(this, EmployeesListComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EmployeesListComponent).call(this, props));\n    _this.state = {\n      employees: undefined,\n      search: '',\n      data: {\n        id: JSON.parse(localStorage.getItem('user')).id,\n        access: JSON.parse(localStorage.getItem('user')).role,\n        order: 'desc',\n        sortBy: 'username'\n      }\n    };\n\n    _this.handleOnChange = function (event) {\n      if (event.target.value.length > 1) {\n        _this.setState({\n          search: event.target.value\n        });\n\n        _this.props.dispatch(searchEmployeeAction({\n          search: event.target.value,\n          access: user.role,\n          id: user.id\n        }));\n      } else {\n        _this.setState({\n          search: ''\n        });\n      }\n    };\n\n    _this.onSortHandle = function (event) {\n      event.preventDefault();\n      var sortBy = event.target.innerHTML.toLowerCase();\n\n      if (_this.state.data.order === 'asc') {\n        _this.setState({\n          data: {\n            id: user.id,\n            access: user.role,\n            order: 'desc',\n            sortBy: sortBy\n          }\n        });\n      } else {\n        _this.setState({\n          data: {\n            id: user.id,\n            access: user.role,\n            order: 'asc',\n            sortBy: sortBy\n          }\n        });\n      }\n\n      _this.props.dispatch(employeesListAction(_this.state.data));\n    };\n\n    user = JSON.parse(localStorage.getItem('user'));\n\n    _this.setState({\n      data: {\n        id: user.id,\n        access: user.id\n      }\n    });\n\n    _this.props.dispatch(employeesListAction(_this.state.data));\n\n    return _this;\n  }\n\n  _createClass(EmployeesListComponent, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(HeaderComponent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(EmployeesListView, {\n        list: this.state.employees,\n        handleOnChange: this.handleOnChange.bind(this),\n        onSortHandle: this.onSortHandle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.response.search.hasOwnProperty('term')) {\n        if (nextProps.response.search.term.length > 0 && prevState.search.length > 0) {\n          return {\n            employees: nextProps.response.search.term\n          };\n        } else {\n          return {\n            employees: nextProps.response.list.response\n          };\n        }\n      } else {\n        return {\n          employees: nextProps.response.list.response\n        };\n      }\n    }\n  }]);\n\n  return EmployeesListComponent;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    response: state\n  };\n};\n\nexport default connect(mapStateToProps)(EmployeesListComponent);","map":{"version":3,"sources":["/home/alex/react_projects/myCompany/src/components/admin/list/employeesListComponent.js"],"names":["React","Component","HeaderComponent","connect","employeesListAction","searchEmployeeAction","EmployeesListView","user","EmployeesListComponent","props","state","employees","undefined","search","data","id","JSON","parse","localStorage","getItem","access","role","order","sortBy","handleOnChange","event","target","value","length","setState","dispatch","onSortHandle","preventDefault","innerHTML","toLowerCase","bind","nextProps","prevState","response","hasOwnProperty","term","list","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport HeaderComponent from '../../commons/headerComponent';\nimport { connect } from 'react-redux';\n\nimport { employeesListAction, searchEmployeeAction } from '../../../actions/adminActions';\nimport EmployeesListView from './employeesListView';\n//import { getCookie } from '../../../utils/cookies';\n\nvar user = null;\n\nclass EmployeesListComponent extends Component {\n  \n  state = {\n    employees: undefined,\n    search: '',\n    data: {\n      id: JSON.parse(localStorage.getItem('user')).id,\n      access: JSON.parse(localStorage.getItem('user')).role,\n      order: 'desc',\n      sortBy: 'username'\n    }\n  }\n\n  constructor(props) {\n    super(props);\n  \n    user = JSON.parse(localStorage.getItem('user'));\n    \n    this.setState({\n        data: {\n          id: user.id,\n          access: user.id\n    }});\n\n    this.props.dispatch(employeesListAction(this.state.data));\n  }\n\n  handleOnChange = (event) => {\n    if (event.target.value.length > 1) {\n      this.setState({ search: event.target.value });\n\n      this.props.dispatch(searchEmployeeAction({\n        search: event.target.value,\n        access: user.role,\n        id: user.id\n      }));\n    } else {\n      this.setState({ search: '' });\n    }\n  }\n\n  onSortHandle = (event) => {\n    event.preventDefault();\n    \n    const sortBy = event.target.innerHTML.toLowerCase();\n\n    if (this.state.data.order === 'asc') {\n      this.setState({\n        data: {\n          id: user.id,\n          access: user.role,\n          order: 'desc',\n          sortBy: sortBy\n        }\n      });\n    } else {\n      this.setState({\n        data: {\n          id: user.id,\n          access: user.role,\n          order: 'asc',\n          sortBy: sortBy\n        }\n      });\n    }\n\n    this.props.dispatch(employeesListAction(this.state.data));\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.response.search.hasOwnProperty('term')) {\n      if (nextProps.response.search.term.length > 0 && prevState.search.length > 0) {\n        return {\n          employees: nextProps.response.search.term\n        };\n      } else {\n        return {\n          employees: nextProps.response.list.response\n        };\n      }\n    } else {\n      return {\n        employees: nextProps.response.list.response\n      };\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <HeaderComponent />\n        <EmployeesListView\n          list={this.state.employees}\n          handleOnChange={this.handleOnChange.bind(this)}\n          onSortHandle={this.onSortHandle.bind(this)}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  response: state\n});\n\nexport default connect(mapStateToProps)(EmployeesListComponent);\n"]},"metadata":{},"sourceType":"module"}