{"ast":null,"code":"import _classCallCheck from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alex/react_projects/myCompany/src/components/employees/home/homeComponent.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom'; //import moment from 'moment';\n\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport { formatDate, parseDate } from 'react-day-picker/moment';\nimport HeaderComponent from '../../commons/headerComponent';\nimport DialogComponent from '../../commons/dialog/dialogComponent';\nimport HomeView from './homeView';\nimport { setVacationActions, fetchVacationActions, deleteVacationAction } from '../../../actions/employeesActions'; //import { getCookie } from '../../../utils/cookies';\n\nimport 'react-day-picker/lib/style.css';\nimport './home.css';\n/*\nfunction timer(ms) {\n return new Promise(res => setTimeout(res, ms));\n}\n\nasync function load () { // We need to wrap the loop into an async function for this to work\n  for (var i = 0; i < 3; i++) {\n    console.log(i);\n    await timer(1000); // then the created Promise can be awaited\n  }\n}\n\nfunction sleep(milliseconds) {\n  const date = Date.now();\n  let currentDate = null;\n  do {\n    currentDate = Date.now();\n  } while (currentDate - date < milliseconds);\n}\n*/\n\nvar user = null;\n\nvar HomeComponent = /*#__PURE__*/function (_Component) {\n  _inherits(HomeComponent, _Component);\n\n  function HomeComponent(props) {\n    var _this;\n\n    _classCallCheck(this, HomeComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomeComponent).call(this, props));\n    _this.state = {\n      from: undefined,\n      to: undefined,\n      isSuccess: false,\n      message: '',\n      list: [],\n      warning: false,\n      dialogMessage: '',\n      id: ''\n    };\n    _this.to = null;\n\n    _this.onSaveHandle = function (event) {\n      event.preventDefault();\n\n      _this.props.dispatch(setVacationActions({\n        start: _this.state.from,\n        end: _this.to.state.month,\n        employeeID: user.id,\n        expire: false\n      }));\n\n      _this.props.dispatch(fetchVacationActions({\n        id: user.id\n      }));\n\n      _this.setState({\n        from: undefined,\n        to: undefined\n      });\n    };\n\n    _this.handleFromChange = function (from) {\n      _this.setState({\n        from: from\n      });\n    };\n\n    _this.handleToChange = function (to) {\n      _this.to = new Date(to);\n\n      _this.setState({\n        to: to\n      });\n    };\n\n    _this.onHandleDelete = function (id, event) {\n      event.preventDefault();\n\n      _this.setState({\n        id: id,\n        warning: true,\n        dialogMessage: 'Are you sure you want to delete this vacations?'\n      });\n    };\n\n    _this.deleteVacation = function (event) {\n      var response = event.target.innerHTML.toLowerCase();\n\n      if (response === 'yes') {\n        _this.props.dispatch(deleteVacationAction({\n          id: _this.state.id,\n          employeeID: user.id\n        }));\n      }\n\n      _this.setState({\n        warning: false\n      });\n\n      return React.createElement(Redirect, {\n        to: \"employee/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      });\n    };\n\n    user = JSON.parse(localStorage.getItem('user'));\n    _this.handleFromChange = _this.handleFromChange.bind(_assertThisInitialized(_this));\n    _this.handleToChange = _this.handleToChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(HomeComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.dispatch(fetchVacationActions({\n        id: user.id\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.props.fetchVacations === undefined || this.props.fetchVacations.length <= 0) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, \"Loading...\");\n      } //load();\n      //sleep(1000);\n\n\n      var _this$state = this.state,\n          from = _this$state.from,\n          to = _this$state.to;\n      var today = new Date();\n      var modifiers = {\n        start: from,\n        end: to\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(HeaderComponent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(DialogComponent, {\n        warning: this.state.warning,\n        message: this.state.dialogMessage,\n        callback: this.deleteVacation.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, this.state.isSuccess ? React.createElement(\"div\", {\n        className: \"message success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.message) : React.createElement(\"div\", {\n        className: \"message error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, this.state.message)), React.createElement(DayPickerInput, {\n        className: \"fields from\",\n        value: from,\n        placeholder: \"From\",\n        format: \"LL\",\n        formatDate: formatDate,\n        parseDate: parseDate,\n        dayPickerProps: {\n          disabledDays: {\n            before: today\n          },\n          toMonth: to,\n          modifiers: modifiers,\n          numberOfMonths: 2,\n          onDayClick: function onDayClick() {\n            return _this2.to.getInput().focus();\n          }\n        },\n        onDayChange: this.handleFromChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), ' ', \"\\u2014\", ' ', React.createElement(\"span\", {\n        className: \"InputFromTo-to\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(DayPickerInput, {\n        className: \"fields to\",\n        ref: function ref(el) {\n          return _this2.to = el;\n        },\n        value: to,\n        placeholder: \"To\",\n        format: \"LL\",\n        formatDate: formatDate,\n        parseDate: parseDate,\n        dayPickerProps: {\n          disabledDays: {\n            before: from\n          },\n          modifiers: modifiers,\n          month: from,\n          fromMonth: from,\n          numberOfMonths: 2\n        },\n        onDayChange: this.handleToChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn success\",\n        onClick: this.onSaveHandle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Save\"), React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, this.props.fetchVacations.response.map(function (vacation) {\n        return React.createElement(HomeView, {\n          vacation: vacation,\n          handleDelete: _this2.onHandleDelete,\n          key: vacation._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        });\n      })))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.vacations.hasOwnProperty('response') && nextProps.fetchVacations.hasOwnProperty('response')) {\n        if (nextProps.vacations.response.success !== prevState.isSuccess) {\n          return {\n            isSuccess: nextProps.vacations.response.success,\n            message: nextProps.vacations.response.message,\n            list: nextProps.fetchVacations.response\n          };\n        } else {\n          return {\n            isSuccess: nextProps.vacations.response.success,\n            message: nextProps.vacations.response.message,\n            list: nextProps.fetchVacations.response\n          };\n        }\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return HomeComponent;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state;\n};\n\nexport default connect(mapStateToProps)(HomeComponent);","map":{"version":3,"sources":["/home/alex/react_projects/myCompany/src/components/employees/home/homeComponent.js"],"names":["React","Component","connect","Redirect","DayPickerInput","formatDate","parseDate","HeaderComponent","DialogComponent","HomeView","setVacationActions","fetchVacationActions","deleteVacationAction","user","HomeComponent","props","state","from","undefined","to","isSuccess","message","list","warning","dialogMessage","id","onSaveHandle","event","preventDefault","dispatch","start","end","month","employeeID","expire","setState","handleFromChange","handleToChange","Date","onHandleDelete","deleteVacation","response","target","innerHTML","toLowerCase","JSON","parse","localStorage","getItem","bind","fetchVacations","length","today","modifiers","disabledDays","before","toMonth","numberOfMonths","onDayClick","getInput","focus","el","fromMonth","map","vacation","_id","nextProps","prevState","vacations","hasOwnProperty","success","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\n//import moment from 'moment';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport { formatDate, parseDate } from 'react-day-picker/moment';\n\nimport HeaderComponent from '../../commons/headerComponent';\nimport DialogComponent from '../../commons/dialog/dialogComponent';\n\nimport HomeView from './homeView';\nimport {\n  setVacationActions,\n  fetchVacationActions,\n  deleteVacationAction\n} from '../../../actions/employeesActions';\n\n//import { getCookie } from '../../../utils/cookies';\n\nimport 'react-day-picker/lib/style.css';\nimport './home.css';\n\n/*\nfunction timer(ms) {\n return new Promise(res => setTimeout(res, ms));\n}\n\nasync function load () { // We need to wrap the loop into an async function for this to work\n  for (var i = 0; i < 3; i++) {\n    console.log(i);\n    await timer(1000); // then the created Promise can be awaited\n  }\n}\n\nfunction sleep(milliseconds) {\n  const date = Date.now();\n  let currentDate = null;\n  do {\n    currentDate = Date.now();\n  } while (currentDate - date < milliseconds);\n}\n*/\n\nvar user = null;\n\nclass HomeComponent extends Component {\n  \n  state = {\n    from: undefined,\n    to: undefined,\n    isSuccess: false,\n    message: '',\n    list: [],\n    warning: false,\n    dialogMessage: '',\n    id: ''\n  }\n\n  to = null;\n\n  constructor(props) {\n    super(props);\n    user = JSON.parse(localStorage.getItem('user'));\n    \n    this.handleFromChange = this.handleFromChange.bind(this);\n    this.handleToChange = this.handleToChange.bind(this);\n  }\n\n  componentDidMount() {\n\n    this.props.dispatch(fetchVacationActions({ id: user.id }));\n  }\n\n  onSaveHandle = (event) => {\n    event.preventDefault();\n\n    this.props.dispatch(setVacationActions({\n      start: this.state.from,\n      end: this.to.state.month,\n      employeeID: user.id,\n      expire: false\n    }));\n\n    this.props.dispatch(fetchVacationActions({ id: user.id }));\n\n    this.setState({ from: undefined, to: undefined });\n  }\n\n  handleFromChange = (from) => {\n    this.setState({ from });\n  }\n\n  handleToChange = (to) => {\n    this.to = new Date(to);\n    this.setState({ to: to });\n  }\n\n  onHandleDelete = (id, event) => {\n    event.preventDefault();\n    this.setState({\n      id: id,\n      warning: true,\n      dialogMessage: 'Are you sure you want to delete this vacations?'\n    });\n  }\n\n  deleteVacation = (event) => {\n    const response = event.target.innerHTML.toLowerCase();\n\n    if (response === 'yes') {\n      this.props.dispatch(deleteVacationAction({\n        id: this.state.id,\n        employeeID: user.id\n      }));\n    }\n\n    this.setState({\n      warning: false\n    });\n\n    return <Redirect to='employee/home' />\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.vacations.hasOwnProperty('response') && nextProps.fetchVacations.hasOwnProperty('response')) {\n      if (nextProps.vacations.response.success !== prevState.isSuccess) {\n        return {\n          isSuccess: nextProps.vacations.response.success,\n          message: nextProps.vacations.response.message,\n          list: nextProps.fetchVacations.response\n        };\n      } else {\n        return {\n          isSuccess: nextProps.vacations.response.success,\n          message: nextProps.vacations.response.message,\n          list: nextProps.fetchVacations.response\n        };\n      }\n    } else {\n      return null;\n    }\n  }\n\n\n  render() {\n  \n    if (this.props.fetchVacations === undefined || this.props.fetchVacations.length <= 0) {\n      return <div>Loading...</div>\n    }\n\n//load();\n//sleep(1000);\n\n    const { from, to } = this.state;\n    const today = new Date();\n    const modifiers = { start: from, end: to };\n    \n    return (\n      <div>\n        <HeaderComponent />\n        <DialogComponent\n          warning={this.state.warning}\n          message={this.state.dialogMessage}\n          callback={this.deleteVacation.bind(this)}\n        />\n        <div className='home'>\n        <div>\n          {\n            (this.state.isSuccess)\n            ?\n            <div className='message success'>{this.state.message}</div>\n            :\n            <div className='message error'>{this.state.message}</div>\n          }\n        </div>\n        <DayPickerInput\n          className='fields from'\n          value={from}\n          placeholder=\"From\"\n          format=\"LL\"\n          formatDate={formatDate}\n          parseDate={parseDate}\n          dayPickerProps={{\n            disabledDays: { before: today },\n            toMonth: to,\n            modifiers,\n            numberOfMonths: 2,\n            onDayClick: () => this.to.getInput().focus(),\n          }}\n          onDayChange={this.handleFromChange.bind(this)}\n        />{' '}\n        —{' '}\n        <span className=\"InputFromTo-to\">\n          <DayPickerInput\n            className='fields to'\n            ref={el => (this.to = el)}\n            value={to}\n            placeholder=\"To\"\n            format=\"LL\"\n            formatDate={formatDate}\n            parseDate={parseDate}\n            dayPickerProps={{\n              disabledDays: { before: from },\n              modifiers,\n              month: from,\n              fromMonth: from,\n              numberOfMonths: 2,\n            }}\n            onDayChange={this.handleToChange.bind(this)}\n          />\n        </span>\n        <button type='button' className='btn success' onClick={this.onSaveHandle.bind(this)}>Save</button>\n        <table>\n          <tbody>\n            {this.props.fetchVacations.response.map(vacation => (\n              <HomeView vacation={vacation} handleDelete={this.onHandleDelete} key={vacation._id} />\n            ))}\n          </tbody>\n        </table>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => (state);\n\nexport default connect(mapStateToProps)(HomeComponent);\n"]},"metadata":{},"sourceType":"module"}