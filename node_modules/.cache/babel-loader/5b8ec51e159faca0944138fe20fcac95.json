{"ast":null,"code":"//import { getCookie } from '../../utils/cookies';\nimport { baseurl, handleResponse } from '../../utils/baseurl';\nexport var updateEmployeeDetailsService = function updateEmployeeDetailsService(request) {\n  var user = JSON.parse(localStorage.getItem('user'));\n\n  var md5 = require('js-md5');\n\n  var UPDATE_PROFILE = baseurl('employee/details');\n  var USER_PROFILE_ENDPOINT = baseurl('admin/profileImg');\n  var filename = '';\n\n  if (request.details.profileImg) {\n    var formData = new FormData();\n    formData.append('profileImg', request.details.profileImg);\n    var options = {\n      method: 'POST',\n      headers: {\n        'Authorization': user.token\n      },\n      body: formData\n    };\n    fetch(USER_PROFILE_ENDPOINT, options).then(function (response) {\n      return handleResponse(response);\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      return json;\n    }).catch(function (error) {\n      return error;\n    });\n    var pieces = request.details.profileImg.name.split('.');\n    var now = new Date();\n    var seconds_10_SinceEpoch = Math.round(now.getTime() / 10000);\n    var str = md5(request.details.profileImg.name + seconds_10_SinceEpoch);\n    var chu1 = str.substr(0, 8);\n    var chu2 = str.substr(8, 4);\n    var chu3 = str.substr(12, 4);\n    var chu4 = str.substr(16, 4);\n    var chu5 = str.substr(20, 12);\n    filename = chu1 + '-' + chu2 + '-' + chu3 + '-' + chu4 + '-' + chu5 + '.' + pieces[pieces.length - 1];\n    request.details.profileImg = filename;\n  }\n\n  var parameters = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': user.token\n    },\n    body: JSON.stringify(request.details)\n  };\n  return fetch(UPDATE_PROFILE, parameters).then(function (response) {\n    return handleResponse(response);\n  }).then(function (response) {\n    return response.json();\n  }).then(function (json) {\n    return json;\n  }).catch(function (error) {\n    return error;\n  });\n};","map":{"version":3,"sources":["/home/alex/react_projects/myCompany/src/services/employee/update.js"],"names":["baseurl","handleResponse","updateEmployeeDetailsService","request","user","JSON","parse","localStorage","getItem","md5","require","UPDATE_PROFILE","USER_PROFILE_ENDPOINT","filename","details","profileImg","formData","FormData","append","options","method","headers","token","body","fetch","then","response","json","catch","error","pieces","name","split","now","Date","seconds_10_SinceEpoch","Math","round","getTime","str","chu1","substr","chu2","chu3","chu4","chu5","length","parameters","stringify"],"mappings":"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","sourcesContent":["//import { getCookie } from '../../utils/cookies';\nimport { baseurl, handleResponse } from '../../utils/baseurl';\n\nexport const updateEmployeeDetailsService = (request) => {\n  \n  let user = JSON.parse(localStorage.getItem('user'));\n  let md5 = require('js-md5');\n  \n  const UPDATE_PROFILE = baseurl('employee/details');\n  const USER_PROFILE_ENDPOINT = baseurl('admin/profileImg');\n  var filename = ''\n\n\n  if (request.details.profileImg) {\t\n    const formData = new FormData()\n    formData.append('profileImg', request.details.profileImg)\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Authorization': user.token\n      },\n      body: formData\n    };\n\n    fetch(USER_PROFILE_ENDPOINT, options)\n      .then(response => {return handleResponse(response)})    \n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        return json;\n      })\n      .catch(error => {\n        return error;\n      });\n      \n    let pieces = request.details.profileImg.name.split('.');\n    const now = new Date()  \n    const seconds_10_SinceEpoch = Math.round(now.getTime() / 10000)\n    const str = md5(request.details.profileImg.name + seconds_10_SinceEpoch);\n    const chu1 = str.substr(0,8);\n    const chu2 = str.substr(8,4);\n    const chu3 = str.substr(12,4);\n    const chu4 = str.substr(16,4);\n    const chu5 = str.substr(20,12);\n    filename = chu1 + '-' + chu2 + '-' + chu3 + '-' + chu4 + '-' + chu5 + '.' + pieces[pieces.length-1];\n    request.details.profileImg = filename;\n  } \n  \n  const parameters = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': user.token\n    },\n    body: JSON.stringify(request.details)\n  };\n\n  return fetch(UPDATE_PROFILE, parameters)\n    .then(response => {return handleResponse(response)})    \n    .then(response => {\n      return response.json();\n    })\n    .then(json => {\n      return json;\n    }).catch(error => {\n      return error;\n    });\n};\n"]},"metadata":{},"sourceType":"module"}