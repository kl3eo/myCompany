{"ast":null,"code":"import _classCallCheck from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/react_projects/myCompany/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alex/react_projects/myCompany/src/components/employees/details/employeeDetailsComponent.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { employeeDetailsAction } from '../../../actions/employeesActions';\nimport { employeeToggleActiveAction } from '../../../actions/adminActions';\nimport HeaderComponent from '../../commons/headerComponent';\nimport EmployeeDetailsView from './employeeDetailsView';\nimport DialogComponent from '../../commons/dialog/dialogComponent'; //import { getCookie } from '../../../utils/cookies';\n\nvar user = null;\n\nvar EmployeeDetailsComponent = /*#__PURE__*/function (_Component) {\n  _inherits(EmployeeDetailsComponent, _Component);\n\n  function EmployeeDetailsComponent(props) {\n    var _this;\n\n    _classCallCheck(this, EmployeeDetailsComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EmployeeDetailsComponent).call(this, props));\n    _this.state = {\n      isSuccess: false,\n      message: '',\n      warning: false,\n      dialogMessage: ''\n    };\n\n    _this.onToggleActive = function (event) {\n      var toggler = _this.props.response.details.response.active ? 'деактивировать' : 'активировать';\n\n      _this.setState({\n        warning: true,\n        dialogMessage: \"\\u0412\\u044B \\u0432 \\u0441\\u0430\\u043C\\u043E\\u043C \\u0434\\u0435\\u043B\\u0435 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \".concat(toggler, \" \").concat(_this.props.response.details.response.name, \"?\")\n      });\n    };\n\n    _this.handleToggleActive = function (event) {\n      var response = event.target.innerHTML.toLowerCase();\n\n      if (response === 'yes') {\n        var data = {\n          admin: {\n            access: user.role,\n            id: user.id\n          },\n          id: _this.props.response.details.response._id\n        };\n\n        _this.props.dispatch(employeeToggleActiveAction(data));\n      }\n\n      _this.setState({\n        warning: false,\n        dialogMessage: ''\n      });\n    };\n\n    user = JSON.parse(localStorage.getItem('user'));\n    var _data = {\n      employeeID: _this.props.match.params.id,\n      admin: {\n        id: user.id,\n        access: user.role\n      }\n    };\n\n    _this.props.dispatch(employeeDetailsAction(_data));\n\n    return _this;\n  }\n\n  _createClass(EmployeeDetailsComponent, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.response.details.response === undefined) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(HeaderComponent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(DialogComponent, {\n        warning: this.state.warning,\n        message: this.state.dialogMessage,\n        callback: this.handleToggleActive.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(EmployeeDetailsView, {\n        success: this.state.isSuccess,\n        message: this.state.message,\n        handleToggleActive: this.onToggleActive.bind(this),\n        employee: this.props.response.details.response,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.response.deactivate.hasOwnProperty('response')) {\n        if (nextProps.response.deactivate.response.success !== prevState.isSuccess) {\n          return {\n            isSuccess: nextProps.response.deactivate.response.success,\n            message: nextProps.response.deactivate.response.message\n          };\n        } else {\n          return {\n            isSuccess: nextProps.response.deactivate.response.success,\n            message: nextProps.response.deactivate.response.message\n          };\n        }\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return EmployeeDetailsComponent;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    response: state\n  };\n};\n\nexport default connect(mapStateToProps)(EmployeeDetailsComponent);","map":{"version":3,"sources":["/home/alex/react_projects/myCompany/src/components/employees/details/employeeDetailsComponent.js"],"names":["React","Component","connect","employeeDetailsAction","employeeToggleActiveAction","HeaderComponent","EmployeeDetailsView","DialogComponent","user","EmployeeDetailsComponent","props","state","isSuccess","message","warning","dialogMessage","onToggleActive","event","toggler","response","details","active","setState","name","handleToggleActive","target","innerHTML","toLowerCase","data","admin","access","role","id","_id","dispatch","JSON","parse","localStorage","getItem","employeeID","match","params","undefined","bind","nextProps","prevState","deactivate","hasOwnProperty","success","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n  employeeDetailsAction\n} from '../../../actions/employeesActions';\n\nimport {\n  employeeToggleActiveAction\n} from '../../../actions/adminActions';\n\nimport HeaderComponent from '../../commons/headerComponent';\nimport EmployeeDetailsView from './employeeDetailsView';\nimport DialogComponent from '../../commons/dialog/dialogComponent';\n\n//import { getCookie } from '../../../utils/cookies';\n\nvar user = null;\n\nclass EmployeeDetailsComponent extends Component {\n  state = {\n    isSuccess: false,\n    message: '',\n    warning: false,\n    dialogMessage: ''\n  }\n\n  constructor(props) {\n    super(props);\n    user = JSON.parse(localStorage.getItem('user'));\n\n    const data = {\n      employeeID: this.props.match.params.id,\n      admin: {\n        id: user.id,\n        access: user.role\n      }\n    };\n\n    this.props.dispatch(employeeDetailsAction(data));\n  }\n\n  onToggleActive = (event) => {\n\n    const toggler = this.props.response.details.response.active ? 'деактивировать' : 'активировать'\n    this.setState({\n      warning: true,\n      dialogMessage: `Вы в самом деле хотите ${toggler} ${this.props.response.details.response.name}?`\n    });\n  }\n\n  handleToggleActive = (event) => {\n    const response = event.target.innerHTML.toLowerCase();\n\n    if (response === 'yes') {\n      const data = {\n        admin: {\n          access: user.role,\n          id: user.id\n        },\n        id: this.props.response.details.response._id\n      };\n\n      this.props.dispatch(employeeToggleActiveAction(data));\n    }\n\n    this.setState({\n      warning: false,\n      dialogMessage: ''\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.response.deactivate.hasOwnProperty('response')) {\n      if (nextProps.response.deactivate.response.success !== prevState.isSuccess) {\n        return {\n          isSuccess: nextProps.response.deactivate.response.success,\n          message: nextProps.response.deactivate.response.message\n        };\n      } else {\n        return {\n          isSuccess: nextProps.response.deactivate.response.success,\n          message: nextProps.response.deactivate.response.message\n        };\n      }\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    if (this.props.response.details.response === undefined) {\n      return <div>Loading...</div>\n    }\n\n    return (\n      <div>\n        <HeaderComponent />\n        <DialogComponent\n          warning={this.state.warning}\n          message={this.state.dialogMessage}\n          callback={this.handleToggleActive.bind(this)}\n        />\n        <EmployeeDetailsView \n          success={this.state.isSuccess}\n          message={this.state.message}\n          handleToggleActive={this.onToggleActive.bind(this)}\n          employee={this.props.response.details.response}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  response: state\n});\n\nexport default connect(mapStateToProps)(EmployeeDetailsComponent);\n"]},"metadata":{},"sourceType":"module"}