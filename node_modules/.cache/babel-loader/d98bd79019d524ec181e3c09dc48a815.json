{"ast":null,"code":"//import { getCookie } from '../../utils/cookies';\nimport { baseurl, handleResponse } from '../../utils/baseurl';\nexport var addEmployeeService = function addEmployeeService(request) {\n  var user = JSON.parse(localStorage.getItem('user'));\n\n  var md5 = require('js-md5');\n\n  var NEW_ENDPOINT = baseurl('admin/new');\n  var USER_PROFILE_ENDPOINT = baseurl('admin/profileImg');\n  var filename = '';\n\n  if (request.profileImg) {\n    var formData = new FormData();\n    formData.append('profileImg', request.profileImg);\n    var options = {\n      method: 'POST',\n      headers: {\n        'Authorization': user.token\n      },\n      body: formData\n    };\n    fetch(USER_PROFILE_ENDPOINT, options).then(function (response) {\n      return handleResponse(response);\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      return json;\n    }).catch(function (error) {\n      return error;\n    });\n    var pieces = request.profileImg.name.split('.');\n    var now = new Date();\n    var seconds_10_SinceEpoch = Math.round(now.getTime() / 10000);\n    var str = md5(request.profileImg.name + seconds_10_SinceEpoch);\n    var chu1 = str.substr(0, 8);\n    var chu2 = str.substr(8, 4);\n    var chu3 = str.substr(12, 4);\n    var chu4 = str.substr(16, 4);\n    var chu5 = str.substr(20, 12);\n    filename = chu1 + '-' + chu2 + '-' + chu3 + '-' + chu4 + '-' + chu5 + '.' + pieces[pieces.length - 1];\n  }\n\n  request.profileImg = filename;\n  var parameters = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': user.token\n    },\n    body: JSON.stringify(request)\n  };\n  return fetch(NEW_ENDPOINT, parameters).then(function (response) {\n    return handleResponse(response);\n  }).then(function (response) {\n    return response.json();\n  }).then(function (json) {\n    return json;\n  }) //    .then( (function(){ window.location.href='new';}).delay(1000) )\n  .catch(function (error) {\n    return error;\n  });\n};","map":{"version":3,"sources":["/home/alex/react_projects/myCompany/src/services/admin/addEmployee.js"],"names":["baseurl","handleResponse","addEmployeeService","request","user","JSON","parse","localStorage","getItem","md5","require","NEW_ENDPOINT","USER_PROFILE_ENDPOINT","filename","profileImg","formData","FormData","append","options","method","headers","token","body","fetch","then","response","json","catch","error","pieces","name","split","now","Date","seconds_10_SinceEpoch","Math","round","getTime","str","chu1","substr","chu2","chu3","chu4","chu5","length","parameters","stringify"],"mappings":"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","sourcesContent":["//import { getCookie } from '../../utils/cookies';\nimport { baseurl, handleResponse } from '../../utils/baseurl';\n\n\nexport const addEmployeeService = (request) => {\n  let user = JSON.parse(localStorage.getItem('user'));\n  let md5 = require('js-md5');\n  \n  const NEW_ENDPOINT = baseurl('admin/new');\n  const USER_PROFILE_ENDPOINT = baseurl('admin/profileImg');\n\n  var filename = ''\n\n  if (request.profileImg) {\t\n    const formData = new FormData()\n    formData.append('profileImg', request.profileImg)\n \n    const options = {\n      method: 'POST',\n      headers: {\n        'Authorization': user.token\n      },\n      body: formData\n    };\n\n    fetch(USER_PROFILE_ENDPOINT, options)\n      .then(response => {return handleResponse(response)})    \n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        return json;\n      })\n      .catch(error => {\n        return error;\n      });\n  \n    let pieces = request.profileImg.name.split('.');\n    const now = new Date()  \n    const seconds_10_SinceEpoch = Math.round(now.getTime() / 10000)\n    const str = md5(request.profileImg.name + seconds_10_SinceEpoch);\n    const chu1 = str.substr(0,8);\n    const chu2 = str.substr(8,4);\n    const chu3 = str.substr(12,4);\n    const chu4 = str.substr(16,4);\n    const chu5 = str.substr(20,12);\n    filename = chu1 + '-' + chu2 + '-' + chu3 + '-' + chu4 + '-' + chu5 + '.' + pieces[pieces.length-1];\n  } \n  \n  request.profileImg = filename;\n\n  const parameters = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': user.token\n    },\n    body: JSON.stringify(request)\n  };\n  \n  return fetch(NEW_ENDPOINT, parameters)\n    .then(response => {return handleResponse(response)})    \n    .then(response => {\n      return response.json();\n    })\n    .then(json => {\n      return json;\n    })\n//    .then( (function(){ window.location.href='new';}).delay(1000) )\n    .catch(error => {\n      return error;\n    });\n};\n"]},"metadata":{},"sourceType":"module"}